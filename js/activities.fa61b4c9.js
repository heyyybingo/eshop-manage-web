(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["activities"],{2839:function(t,e,a){"use strict";a("db4e")},"28d9":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"b",(function(){return r}));var i=a("bb36"),n={selectAllActivities:"/banner/list",deleteActivities:"/banner/delete",addActivities:"/banner/save",updateActivities:"/banner/update",searchActivities:"/banner/list"};function o(){return Object(i["a"])({url:n.selectAllActivities,method:"post"})}function s(t){return Object(i["a"])({url:n.addActivities,method:"post",data:t})}function c(t){return Object(i["a"])({url:n.updateActivities,method:"post",data:t})}function r(t){return Object(i["a"])({url:n.deleteActivities,method:"post",data:t})}},"73aa":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("span",{staticStyle:{color:"#303133"}},[a("a-icon",{attrs:{type:"unordered-list"}}),t._v(" 筛选搜索")],1),a("a-space",{staticStyle:{float:"right"}},[a("a-button",{on:{click:t.reset}},[t._v(" 重置 ")]),a("a-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(" 查询活动 ")])],1),a("a-form",{staticClass:"search-form",attrs:{"label-col":{span:2},"wrapper-col":{span:5}}},[a("a-form-item",{attrs:{label:"活动名称"}},[a("a-input",{attrs:{id:"name",placeholder:"活动名称"},model:{value:t.searchBanner.name,callback:function(e){t.$set(t.searchBanner,"name",e)},expression:"searchBanner.name"}})],1)],1)],1),a("div",{staticClass:"container"},[a("span",{staticStyle:{color:"#303133"}},[a("a-icon",{attrs:{type:"unordered-list"}}),t._v(" 活动列表")],1)]),a("a-table",{attrs:{rowKey:"id",columns:t.columns,"data-source":this.data,pagination:this.pagination},scopedSlots:t._u([{key:"pic",fn:function(t){return[a("img",{attrs:{src:t,width:"100px"}})]}},{key:"start",fn:function(e){return[t._v(" "+t._s(t.formatTime(e))+" ")]}},{key:"end",fn:function(e){return[t._v(" "+t._s(t.formatTime(e))+" ")]}},{key:"action",fn:function(e){return[a("router-link",{attrs:{to:{path:"setgood",query:{id:e.id}}}},[t._v("设置商品")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(a){return t.showEditModal(e)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(a){return t.showConfirm(e)}}},[t._v(" 删除")])]}}])}),a("a-modal",{attrs:{title:"编辑活动",visible:t.visible_edit},on:{ok:t.editSubmit,cancel:t.editCancel}},[a("a-form",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-item",{attrs:{label:"活动标题"}},[a("a-input",{model:{value:t.editActivity.title,callback:function(e){t.$set(t.editActivity,"title",e)},expression:"editActivity.title"}})],1),a("a-form-item",{attrs:{label:"活动图片"}},[a("a-input",{model:{value:t.editActivity.avator,callback:function(e){t.$set(t.editActivity,"avator",e)},expression:"editActivity.avator"}})],1),a("a-form-item",{attrs:{label:"开始时间"}},[a("a-date-picker",{attrs:{value:t.formatTime(t.editActivity.starttime),"disabled-date":t.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Start"},on:{change:t.startChange,openChange:t.handleStartOpenChange}})],1),a("a-form-item",{attrs:{label:"结束时间"}},[a("a-date-picker",{attrs:{value:t.formatTime(t.editActivity.endtime),"disabled-date":t.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"End",open:t.endOpen},on:{change:t.endChange,openChange:t.handleEndOpenChange}})],1),a("a-form-item",{attrs:{label:"活动内容"}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.editActivity.content,callback:function(e){t.$set(t.editActivity,"content",e)},expression:"editActivity.content"}})],1)],1)],1)],1)},n=[],o=(a("d3b7"),a("28d9")),s=[{title:"编号",dataIndex:"id",key:"id"},{title:"活动标题",dataIndex:"title",key:"title"},{title:"活动图片",dataIndex:"avator",key:"avator",scopedSlots:{customRender:"pic"}},{title:"开始时间",dataIndex:"starttime",key:"starttime",scopedSlots:{customRender:"start"}},{title:"结束时间",dataIndex:"endtime",key:"endtime",scopedSlots:{customRender:"end"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],c={data:function(){return{data:null,columns:s,visible_edit:!1,editActivity:{},searchBanner:{},pagination:{defaultPageSize:6},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},endOpen:!1}},created:function(){this.getList()},methods:{formatTime:function(t){return this.$moment(t).format("YYYY-MM-DD HH:mm:ss")},getList:function(){var t=this;Object(o["c"])().then((function(e){t.data=e.data.page.list,console.log(t.data)}))},showEditModal:function(t){this.editActivity=t,this.visible_edit=!0},editSubmit:function(){var t=this;console.log(this.editActivity),Object(o["d"])(this.editActivity).then((function(e){0===e.data.code&&(console.log("编辑成功"),t.getList())})),this.visible_edit=!1},editCancel:function(){this.visible_edit=!1},showConfirm:function(t){var e=this;this.$confirm({title:"确认删除该活动?",okText:"确认",cancelText:"取消",onOk:function(){return console.log(t.id),Object(o["b"])([t.id]).then((function(t){0===t.data.code&&(e.$success({title:"删除成功"}),console.log("删除成功"),e.getList())})),new Promise((function(t,e){setTimeout(Math.random()>.5?t:e,1e3)})).catch((function(){return console.log("Oops errors!")}))},onCancel:function(){}})},disabledStartDate:function(t){var e=this.editActivity.endtime;return!(!t||!e)&&t.valueOf()>e.valueOf()},disabledEndDate:function(t){var e=this.editActivity.starttime;return!(!t||!e)&&e.valueOf()>=t.valueOf()},handleStartOpenChange:function(t){t||(this.endOpen=!0)},handleEndOpenChange:function(t){this.endOpen=t},startChange:function(t){this.editActivity.starttime=t},endChange:function(t){this.editActivity.endtime=t},search:function(){},reset:function(){}}},r=c,l=(a("cc32"),a("2877")),d=Object(l["a"])(r,i,n,!1,null,"4091bfda",null);e["default"]=d.exports},"79b1":function(t,e,a){},b2c2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",[i("a-page-header",{attrs:{title:"添加活动"},on:{back:function(){t.$router.back()}}}),i("div",{staticClass:"container"},[i("a-form",e._b({},"a-form",e.formItemLayout,!1),[i("a-form-item",{attrs:{label:"活动名称"}},[i("a-input",{attrs:{id:"title",placeholder:"请输入活动名称"},model:{value:e.activity.title,callback:function(t){e.$set(e.activity,"title",t)},expression:"activity.title"}})],1),i("a-form-item",{attrs:{label:"起止时间"}},[i("a-range-picker",{attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["Start Time","End Time"]},on:{change:e.onChange}})],1),i("a-form-item",{attrs:{label:"活动图片"}},[i("a-upload",{attrs:{name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),e._v(" Click to Upload ")],1)],1)],1),i("a-form-item",{attrs:{label:"活动内容"}},[i("a-textarea",{attrs:{rows:3,placeholder:"请输入活动内容"},model:{value:e.activity.content,callback:function(t){e.$set(e.activity,"content",t)},expression:"activity.content"}})],1),i("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[i("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addActivity(e.activity)}}},[e._v(" 添加活动 ")])],1)],1)],1)],1)},n=[],o=a("28d9"),s={data:function(){return{loading:!1,imageUrl:"",activity:{},formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}}},methods:{onChange:function(t){this.activity.starttime=t[0],this.activity.endtime=t[1]},addActivity:function(t){var e=this;t.avator="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=188100204,3828227675&fm=26&gp=0.jpg",Object(o["a"])(t).then((function(t){0===t.data.code&&(e.$success({title:"添加成功"}),console.log("添加成功"),e.user={})})),console.log(t)}}},c=s,r=(a("2839"),a("2877")),l=Object(r["a"])(c,i,n,!1,null,"ee07b488",null);e["default"]=l.exports},cc32:function(t,e,a){"use strict";a("79b1")},db4e:function(t,e,a){}}]);
//# sourceMappingURL=activities.fa61b4c9.js.map